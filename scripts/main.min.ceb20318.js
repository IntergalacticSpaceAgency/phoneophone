(function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function a(a,b,d,e){this.audio_context=a,this.type=b,this.frequency=d,this.gain_value=e,this._create_gain_for_oscillator=c(this._create_gain_for_oscillator,this),this._create_oscillator=c(this._create_oscillator,this),this.stop=c(this.stop,this),this.start=c(this.start,this),this.update=c(this.update,this),this.oscillator=this._create_oscillator(this.type,this.frequency),this.gain=this._create_gain_for_oscillator(this.oscillator,this.gain_value)}return a.prototype.update=function(a,b){return this.frequency=a,this.gain_value=b,this.oscillator.frequency.value=a,this.gain.gain.value=b},a.prototype.start=function(a){return null==a&&(a=0),this.oscillator.start(a)},a.prototype.stop=function(a){return null==a&&(a=0),this.oscillator.stop(a)},a.prototype._create_oscillator=function(a,b){var c;return c=this.audio_context.createOscillator(),c.type=a,c.frequency.value=b,c},a.prototype._create_gain_for_oscillator=function(a,b){var c;return c=this.audio_context.createGain(),c.gain.value=b,c.connect(this.audio_context.destination),a.connect(c),c},a}(),a=function(){function a(a,d,e){this.audio_context=a,this.frequency=d,this.crossfade=null!=e?e:.5,this.stop=c(this.stop,this),this.start=c(this.start,this),this.update=c(this.update,this),this.left=new b(this.audio_context,"sine",this.frequency,.1*this.crossfade),this.right=new b(this.audio_context,"sawtooth",this.frequency,.1*(1-this.crossfade))}return a.prototype.update=function(a,b){return this.frequency=a,this.crossfade=b,this.left.update(this.frequency,.1*b),this.right.update(this.frequency,.1*(1-b))},a.prototype.start=function(a){return null==a&&(a=0),_.each([this.left,this.right],function(b){return b.start(a)})},a.prototype.stop=function(a){return null==a&&(a=0),_.each([this.left,this.right],function(b){return b.stop(a)})},a}(),window.PhoneoPhone=window.PhoneoPhone||{},PhoneoPhone.Tone=b,PhoneoPhone.DualTone=a}).call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a,c){var d;this.min_frequency=null!=a?a:500,this.max_frequency=null!=c?c:1500,this._crossfade_at_x=b(this._crossfade_at_x,this),this._frequency_at_y=b(this._frequency_at_y,this),this.stop_tone=b(this.stop_tone,this),this.start_tone=b(this.start_tone,this),this.on_stop_event=b(this.on_stop_event,this),this.on_change_event=b(this.on_change_event,this),this.on_start_event=b(this.on_start_event,this),this.add_touch_control=b(this.add_touch_control,this),this.add_mouse_control=b(this.add_mouse_control,this),this.update_dual_tone=b(this.update_dual_tone,this),this.add_dual_tone=b(this.add_dual_tone,this),d=window.AudioContext||window.webkitAudioContext,this.audio_context=new d,this.dual_tones={},this.add_mouse_control(),this.add_touch_control()}return a.prototype.add_dual_tone=function(a,b){var c,d;return d=this._frequency_at_y(b.y),c=this._crossfade_at_x(b.x),this.dual_tones[a]=new PhoneoPhone.DualTone(this.audio_context,d,c)},a.prototype.update_dual_tone=function(a,b){var c,d;return _.isObject(this.dual_tones[a])?(d=this._frequency_at_y(b.y),c=this._crossfade_at_x(b.x),this.dual_tones[a].update(d,c)):void 0},a.prototype.add_mouse_control=function(a,b,c,d){var e;return e=this,a="mouse",addEventListener("mousedown",function(b){return b.preventDefault(),e.on_start_event(b,a)}),addEventListener("mousemove",function(b){return b.preventDefault(),e.on_change_event(b,a)}),addEventListener("mouseup",function(b){return b.preventDefault(),e.on_stop_event(b,a)})},a.prototype.add_touch_control=function(){var a;return a=this,addEventListener("touchstart",function(b){return b.preventDefault(),_.each(b.changedTouches,function(b){return a.on_start_event(b,b.identifier)})}),addEventListener("touchmove",function(b){return b.preventDefault(),_.each(b.changedTouches,function(b){return a.on_change_event(b,b.identifier)})}),addEventListener("touchend",function(b){return b.preventDefault(),_.each(b.changedTouches,function(b){return a.on_stop_event(b,b.identifier)})})},a.prototype.on_start_event=function(a,b){return this.add_dual_tone(b,{x:a.clientX,y:a.clientY}),this.start_tone(b)},a.prototype.on_change_event=function(a,b){return this.update_dual_tone(b,{x:a.clientX,y:a.clientY})},a.prototype.on_stop_event=function(a,b){return this.stop_tone(b)},a.prototype.start_tone=function(a){return _.isObject(this.dual_tones[a])?this.dual_tones[a].start():void 0},a.prototype.stop_tone=function(a){return _.isObject(this.dual_tones[a])?this.dual_tones[a].stop():void 0},a.prototype._frequency_at_y=function(a){return a/window.innerHeight*(this.max_frequency-this.min_frequency)+this.min_frequency},a.prototype._crossfade_at_x=function(a){return a/window.innerWidth},a}(),window.PhoneoPhone=window.PhoneoPhone||{},PhoneoPhone.AudioSpace=a}.call(this),function(){var a;a=new PhoneoPhone.AudioSpace(50,1e3)}.call(this);